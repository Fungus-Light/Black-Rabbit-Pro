"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CreateDialog = exports.DialogManager = void 0;
const SayDialog_1 = require("Dialog/SayDialog");
const Common_1 = require("Utils/Common");
/**
 * Manage A Dialog FLow
 */
class DialogManager {
    constructor() {
        this.FlowList = new Array();
    }
    /**
     * Say Something
     * @param text Content To Say
     * @param clearPrevious will Close Previous Say
     * @param waitForInput wait For User Click
     * @param fadeWhenDone
     * @param stopVoiceover
     * @param waitForVO
     * @param clip
     */
    SayDetail(text, clearPrevious, waitForInput, fadeWhenDone, stopVoiceover, waitForVO, clip) {
        this.FlowList.push(() => {
            SayDialog_1.$SayDialog().gameObject.SetActive(true);
            SayDialog_1.$SayDialog().Say(text, clearPrevious, waitForInput, fadeWhenDone, stopVoiceover, waitForVO, clip, () => {
                this.Gonext();
            });
        });
    }
    Say(text) {
        this.FlowList.push(() => {
            SayDialog_1.$SayDialog().gameObject.SetActive(true);
            SayDialog_1.$SayDialog().Say(text, true, true, true, true, true, null, () => {
                this.Gonext();
            });
        });
    }
    /**
     * Set The CallBack When Flow is End
     * @param cb
     */
    SetCallBack(cb) {
        this.CB = cb;
        Common_1.Debug.LogWarning("Call Back Setted");
    }
    Gonext() {
        if (this.FlowList.length > 0) {
            let step = this.FlowList.shift();
            step();
        }
        else {
            Common_1.Debug.LogWarning("Nothing To Talk.");
            if (this.CB == null) {
                Common_1.Debug.LogWarning("CB is Nothing");
            }
            else {
                this.CB();
            }
        }
    }
    /**
     * Start A FLow
     */
    Start() {
        this.Gonext();
    }
}
exports.DialogManager = DialogManager;
function CreateDialog() {
    return new DialogManager;
}
exports.CreateDialog = CreateDialog;
//# sourceMappingURL=DialogManager.js.map